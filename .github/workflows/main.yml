# –®–∞–≥ 2.1: –î–∞—ë–º –∏–º—è –Ω–∞—à–µ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É (–≤–∏–¥–Ω–æ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ)
name: Auto Deploy App

# –®–∞–≥ 2.2: –ì–æ–≤–æ—Ä–∏–º, –ö–û–ì–î–ê –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
on:
  push:
    branches: [ main ]  # –ó–∞–ø—É—Å–∫–∞—Ç—å –¢–û–õ–¨–ö–û –ø—Ä–∏ –ø—É—à–µ –≤ –≤–µ—Ç–∫—É main

# –®–∞–≥ 2.3: –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å –Ω–∞—à —Ä–æ–±–æ—Ç (–æ—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞)
jobs:
  deploy-job:  # –ù–∞–∑—ã–≤–∞–µ–º –Ω–∞—à—É –∑–∞–¥–∞—á—É (–º–æ–∂–µ—Ç–µ –ª—é–±–æ–µ –∏–º—è)
    # –®–∞–≥ 2.4: –ì–¥–µ —Ä–∞–±–æ—Ç–∞—Ç—å? –í—ã–±–∏—Ä–∞–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É
    runs-on: ubuntu-latest  # –°–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
    
    # –®–∞–≥ 2.5: –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π (—à–∞–≥–∏)
    steps:
      # –®–∞–≥ 2.6: –°–∫–∞—á–∞—Ç—å –∫–æ–¥ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
      - name: Download Code
        uses: actions/checkout@v4  # –≠—Ç–æ –∫–∞–∫ "git clone" –¥–ª—è CI
        
      # –®–∞–≥ 2.7: –ó–∞–ø—É—Å–∫–∞–µ–º –≤–∞—à —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è
      - name: Run Deploy Script
        run: |  # –ó–¥–µ—Å—å –ø–∏—à–µ–º –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
          echo "üöÄ –ù–∞—á–∏–Ω–∞—é –ø—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è..."
          # –î–∞—ë–º —Å–∫—Ä–∏–ø—Ç—É –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ (–µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å)
          chmod +x deploy.sh
          # –ó–∞–ø—É—Å–∫–∞–µ–º –≤–∞—à —Å–∫—Ä–∏–ø—Ç
          ./deploy.sh
          echo "‚úÖ –î–µ–ø–ª–æ–π —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à—ë–Ω!"
          
      # –®–∞–≥ 2.8: –°–æ–∑–¥–∞—ë–º –æ—Ç—á—ë—Ç (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ)
      - name: Create Report
        run: |
          echo "# –û—Ç—á—ë—Ç –æ –¥–µ–ø–ª–æ–µ" > report.md
          echo "- –î–∞—Ç–∞: $(date)" >> report.md
          echo "- –ö–æ–º–º–∏—Ç: ${{ github.sha }}" >> report.md
          echo "- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${{ github.actor }}" >> report.md
          
      # –®–∞–≥ 2.9: –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç—á—ë—Ç –∫–∞–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç
      - name: Save Report
        uses: actions/upload-artifact@v3
        with:
          name: deployment-report  # –ò–º—è —Ñ–∞–π–ª–∞
          path: report.md  # –ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º
